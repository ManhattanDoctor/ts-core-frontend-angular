@use 'sass:map';
@use 'variables' as var;
@use '@angular/material' as mat;

@use '../text' as text;
@use '../mouse' as mouse;
@use '../scroll' as scroll;
@use 'bootstrap' as bootstrap;

@import 'bootstrap/scss/functions';
@import 'bootstrap/scss/variables';
@import 'bootstrap/scss/mixins/breakpoints';

@mixin core() {
    @include mat.core();    
    @include bootstrap.core();    

    // Common
    p,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    body {
        padding: 0;
        margin: 0;
    }

    a:focus,
    div:focus,
    button:focus {
        outline: 0;
    }
    textarea {
        &.cdk-textarea-autosize {
            overflow-y: hidden !important;
        }
    }

    // Material

    mat-chip:focus,
    mat-tab-group {
        outline: 0;
    }
    mat-dialog-container {
        &:hover:not(.minimized) {
            vi-window-resize-element {
                display: block !important;
            }
        }
        vi-window-resize-element {
            width: 32px;
            right: -16px;
            bottom: -16px;
            display: none !important;
            pointer-events: none;
        }
    }
    mat-bottom-sheet-container {
        padding: 0 !important;
        overflow: visible !important;
        & > :first-child {
            height: 100%;
            border-radius: var.$border-radius;
            @include scroll.vertical();
        }
    }
    mat-form-field {
        &.no-underline {
            .mdc-text-field {
                border-bottom-left-radius: var.$border-radius;
                border-bottom-right-radius: var.$border-radius;
                .mdc-line-ripple {
                    display: none;
                }
            }
        }
    }
    mat-dialog-container,
    mat-bottom-sheet-container {
        vi-window-close-element,
        vi-window-expand-element,
        vi-window-minimize-element {
            top: -16px;
            width: 32px;
            height: 32px;
        }
        vi-window-close-element {
            right: -16px;
        }
        vi-window-expand-element,
        vi-window-minimize-element {
            right: 24px;
        }
        @include media-breakpoint-down(lg) {
            vi-window-close-element {
                right: 16px;
            }
            vi-window-expand-element,
            vi-window-minimize-element {
                right: 56px;
            }
        }
    }
    mat-cell {
        color: inherit !important;
    }
    mat-header-cell {
        &:not(:hover),
        &.mat-sort-header-disabled {
            color: inherit !important;
        }
    }
 
    mat-expansion-panel {
        border-radius: 0 !important;
        border-bottom-width: 1px;
        border-bottom-style: solid;
        &:last-child {
            border-bottom: none !important;
        }
        &:not([class*='mat-elevation-z']) {
            box-shadow: none !important;
        }
        &.mat-expansion-panel-spacing {
            margin: 0 !important;
        }
        mat-expansion-panel-header {
            height: auto !important;
            padding: 1rem !important;
            &.mat-expanded {
                height: auto !important;
            }
        }
        .mat-expansion-panel-body {
            padding: 0 !important;
        }
    }

    mat-progress-bar {
        &.border {
            height: 1px;
            border: none !important;
            .mdc-linear-progress__buffer {
                .mdc-linear-progress__buffer-dots {
                    display: none;
                }
            }
        }
        &.transparent {
            .mdc-linear-progress__buffer {
                .mdc-linear-progress__buffer-dots {
                    display: none;
                }
            }
        }
    }
    mat-table {
        background: none !important;
    }
    mat-paginator {
        background: none !important;
    }
    .mat-icon {
        width: unset !important;
        height: unset !important;
    }
    .cdk-global-scrollblock {
        overflow-y: auto;
    }
    .cdk-overlay-pane {
        &.vi-window,
        &.vi-notification {
            position: absolute !important;
        }
        &.vi-draggable,
        &.vi-resizeable {
            border-radius: var.$border-radius;
        }
        &.vi-window {
            border: 2px solid transparent;
        }
        &.minimized {
            height: auto !important;
            min-height: 40px !important;
        }
        &.vi-blink {
            border-width: 2px;
            border-style: solid;
            animation: blink 1s;
            animation-iteration-count: 3;
            // @keyframes blink { 50% { border-color:#fff ; }  }
        }
        .mat-mdc-select-panel {
            padding: 0 !important;
            border-style: solid;
            border-width: 1px;
            border-radius: var.$border-radius;
        }
        .mat-mdc-menu-content {
            padding: 0 !important;
        }
        .mat-mdc-menu-panel {
            max-width: none !important;
            max-height: none !important;
            min-height: 0px !important;
        }
    }
    .mdc-tooltip__surface {
        max-height: inherit !important;
    }
    .mat-mdc-paginator-range-label {
        margin-left: 1rem;
        margin-right: 1rem;
    }

    // Text
    .mat-h1,
    .mat-h2,
    .mat-h3,
    .mat-h4,
    .mat-h5,
    .mat-h6,
    .mat-body,
    .mat-body-1,
    .mat-body-2,
    .mat-body-strong,
    .mat-small,
    .mat-caption,
    .mat-subtitle-1,
    .mat-subtitle-2,
    .mat-headline-1,
    .mat-headline-2,
    .mat-headline-3,
    .mat-headline-4,
    .mat-headline-5,
    .mat-headline-6 {
        margin: 0;
    }

    .text-underline {
        text-decoration: underline !important;
    }
    .text-one-line {
        @include text.one-line();
    }
    .text-multi-line {
        @include text.word-wrap-break-word();
        @include text.word-break-break-all();
    }
    .text-word-wrap-break-word {
        @include text.word-wrap-break-word();
    }
    .text-word-break-break-all {
        @include text.word-break-break-all();
    }
    .scroll-no {
        @include scroll.no();
    }
    .scroll-auto {
        @include scroll.auto();
    }
    .scroll-vertical {
        @include scroll.vertical();
    }
    .scroll-horizontal {
        @include scroll.horizontal();
    }
    .mouse-help {
        @include mouse.help();
    }
    .mouse-wait {
        @include mouse.wait();
    }
    .mouse-active {
        @include mouse.active();
    }
    .mouse-enabled {
        @include mouse.enabled();
    }
    .mouse-disabled {
        @include mouse.disabled();
    }
    .mouse-inactive {
        @include mouse.inactive();
    }
    .mouse-disabled {
        @include mouse.disabled();
    }

    ::-webkit-scrollbar {
        width: 14px;
        height: 14px;
    }
    ::-webkit-scrollbar-thumb {
        height: 6px;
        min-height: 16px;
        border: 4px solid;
        background-clip: padding-box;
        -webkit-border-radius: 7px;
    }
    ::-webkit-scrollbar-thumb {
        border-color: transparent;
        -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);
    }
    ::-webkit-scrollbar-corner {
        background-color: transparent;
    }
    ::-webkit-scrollbar-button {
        width: 0;
        height: 0;
        display: none;
    }
}